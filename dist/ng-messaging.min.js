angular.module("ngMessaging",["ui.bootstrap"]).provider("ngMessaging",function(){"use strict";var a;this.setMessageHandler=function(b){a=b},this.$get=["$q","$timeout",function(b,c){return a?a:function(a){var d=b.defer();return c(function(){d.resolve({msg:a.msg})}),d.promise}}]}),angular.module("ngMessaging").directive("ngMessagingArea",["ngMessagingManager",function(a){"use strict";return{replace:!0,transclude:!0,templateUrl:"template/ng-messaging/messaging-area.html",link:function(b,c,d){b.channel=d.channel,b.submit=function(){a.addMsg(b)}}}}]),angular.module("ngMessaging").directive("ngMessagingList",["ngMessagingManager",function(a){"use strict";return{replace:!0,transclude:!0,templateUrl:"template/ng-messaging/messaging-list.html",link:function(b,c,d){a.addChannel(d.channel)}}}]),angular.module("ngMessaging").factory("ngMessagingManager",["ngMessaging","NgMessagingMessage",function(a,b){"use strict";function c(a){return void 0!==e[a]}var d={},e={};return d.addChannel=function(a){c(a)||(e[a]=[])},d.addMsg=function(b){return b&&b.channel&&c(b.channel)?(a(b).then(function(a){console.log(a)},function(a){console.log("bad")}),!0):!1},d}]),angular.module("ngMessaging").factory("NgMessagingMessage",[function(){"use strict";var a,b=[];return a=function(a){angular.isString(a)&&(a={msg:a}),this.id=a.id||this.createId(),this.msg=a.msg,this.time=a.time||Date.now()},a.prototype.createId=function(){for(var a=0;-1!==b.indexOf(a);)a+=1;return a},a}]),angular.module("ngMessaging").run(["$templateCache",function(a){"use strict";a.put("template/ng-messaging/messaging-area.html",'<div>\r\n    <textarea ng-model="msg" class="ng-messaging-area form-control"></textarea>\r\n    <button class="btn" ng-click="submit()">Submit</button>\r\n</div>\r\n'),a.put("template/ng-messaging/messaging-list.html",'<ul>\r\n    <li ng-repeat="msg in msgs">{{msg}}</li>\r\n</ul>')}]);