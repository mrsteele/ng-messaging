angular.module("ngMessaging",["ui.bootstrap"]),angular.module("ngMessaging").directive("ngMessagingArea",["ngMessagingManager",function(a){"use strict";return{replace:!0,transclude:!0,templateUrl:"template/ng-messaging/messaging-area.html",link:function(b,c,d){b.channel=d.channel,b.closeError=function(){b.error=""},b.submit=function(){b.error="";var c=a.addMsg(b);c.then(function(){b.msg=""},function(a){b.error=a})}}}}]),angular.module("ngMessaging").directive("ngMessagingList",["ngMessagingManager",function(a){"use strict";return{replace:!0,transclude:!0,templateUrl:"template/ng-messaging/messaging-list.html",link:function(b,c,d){a.addChannel(d.channel),b.$watch(function(){return a.getChannelMsgs(d.channel)},function(a){b.msgs=a})}}}]),angular.module("ngMessaging").factory("ngMessagingManager",["NgMessagingMessage","$q",function(a,b){"use strict";function c(a){return void 0!==e[a]}var d={},e={},f=function(a){return b.reject("Message handler not set up.")};return d.addChannel=function(a){c(a)||(e[a]=[])},d.getChannelMsgs=function(a){return c(a)?e[a]:[]},d.addMsg=function(d){if(d&&d.channel&&c(d.channel)){var g=f(d).then(function(b){e[d.channel].push(new a(b))});return g}return b.reject("Channel does not exist.")},d.setMessageHandler=function(a){f=a},d}]),angular.module("ngMessaging").factory("NgMessagingMessage",[function(){"use strict";var a,b=[];return a=function(a){angular.isString(a)&&(a={msg:a}),this.id=a.id||this.createId(),this.msg=a.msg,this.time=a.time||Date.now()},a.prototype.createId=function(){for(var a=0;-1!==b.indexOf(a);)a+=1;return b.push(a),a},a}]),angular.module("ngMessaging").run(["$templateCache",function(a){"use strict";a.put("template/ng-messaging/messaging-area.html",'<div ng-class="{\'has-error\': error.length}">\r\n    <textarea ng-model="msg" class="ng-messaging-area form-control"></textarea>\r\n    <div class="help-block" ng-show="error.length">{{error}}</div>\r\n    <button class="btn" ng-click="submit()">Submit</button>\r\n</div>\r\n'),a.put("template/ng-messaging/messaging-list.html",'<ul>\r\n    <li ng-repeat="msg in msgs">{{msg}}</li>\r\n</ul>')}]);